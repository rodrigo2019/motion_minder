[gcode_shell_command motion_minder]
command: ~/motion_minder/motion_minder/motion_minder.sh
timeout: 600.0
verbose: True

[respond]

[gcode_macro MOTION_MINDER]
gcode:
    {% set stats = params.STATS|default(False) %}
    {% set next_maintenance = params.NEXT_MAINTENANCE|default(False) %}
    {% set process_history = params.PROCESS_HISTORY|default(False) %}
    {% set set_axis = params.SET_AXIS|default(False) %}
    {% set axis = params.AXIS|default("xyz") %}
    {% if stats %}
        RUN_SHELL_COMMAND CMD=motion_minder PARAMS="--stats"
    {% elif next_maintenance %}
        RUN_SHELL_COMMAND CMD=motion_minder PARAMS="--next-maintenance {next_maintenance} --axis {axis}"
    {% elif process_history %}
        RESPOND MSG="Its experimental, can take a while, please wait..."
        RUN_SHELL_COMMAND CMD=motion_minder PARAMS="--process-history"
    {% elif set_axis %}
        RUN_SHELL_COMMAND CMD=motion_minder PARAMS="--set-axis {set_axis} --axis {axis}"
    {% endif %}